<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EDM - Our Work</title>

    <link rel="stylesheet" href="assets/fonts/fonts.css?v=3" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="assets/css/base-style.css?v=3" />
    <link rel="stylesheet" href="assets/css/navbar_style.css?v=3" />
    <link rel="stylesheet" href="assets/css/particle-anim.css?v=3" />
    <link rel="stylesheet" href="assets/css/subpage-base-style.css?v=3" />
    <link rel="stylesheet" href="assets/css/article-style.css?v=3" />
    <link rel="stylesheet" href="assets/css/management-style.css" />
  </head>
  <style>
    #resultImages img{
       width: 100%;
       height: 180px;
       object-fit: cover;
    }
  </style>
  <body>
    <div class="side-menu">
      <svg
        class="close-btn"
        id="close-sidenav-btn"
        xmlns="http://www.w3.org/2000/svg"
        height="48"
        width="48"
      >
        <path
          fill="#ffff"
          d="M12.45 38.7 9.3 35.55 20.85 24 9.3 12.5l3.15-3.2L24 20.8 35.55 9.3l3.15 3.2L27.2 24l11.5 11.55-3.15 3.15L24 27.2Z"
        />
      </svg>

      <div class="side-btn-section">
        <a href="index.html" class="side-btn"
          ><img src="assets/img/edm-logo-2.png" alt=""
        /></a>
        <a href="index.html" class="side-btn">OUR WORK</a>
        <a href="index.html" class="side-btn">NEWS</a>
        <a href="index.html" class="side-btn">CONTACT US</a>
        <div class="lang-change-btns">
          <a href="#" class="active" id="thaiBtn"><img src="assets/img/THAILAND.png" alt="" width="20" id="thaiBtn" /> TH</a>
          <a href="#" id="engBtn"><img src="assets/img/UK.png" alt="" width="20" id="engBtn" /> ENG</a>
        </div>
      </div>
    </div>

    <div class="main">
      <nav>
        <!-- Nav Hamberger menu -->
        <div class="nav-menu">
          <img src="assets/img/menu.svg" alt="" />
        </div>

        <div class="nav-btns">
          <a href="index.html"
            ><img src="assets/img/edm-logo-2.png" alt=""
          /></a>
          <div class="nav-btns-wrapper">
            <a href="our-works.html">OUR WORK</a>
            <a href="index.html">SERVICE</a>
            <a href="index.html">CONTACT US</a>
            <div class="nav-dropdown" data-dropdown>
              <button class="nav-dropdown-btn" data-dropdown-button>
                <img src="assets/img/thai-lang-icon.png" alt="" /> TH
                <img src="assets/img/expand.svg" alt="" />
              </button>
              <div class="nav-dropdown-menu">
                <a href="#"><img src="assets/img/thai-lang-icon.png" width="20" id="thaiBtn2" alt="" /> TH</a>
                <a href="#"><img src="assets/img/UK.png" id="engBtn2" width="20" alt="" /> ENG</a>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <section class="header-sec sidepage-h">
        <div class="animation-wrapper">
          <div id="stars-group-1"></div>
          <div id="stars-group-2"></div>
          <div id="stars-group-3"></div>
          <div id="stars-group-4"></div>
          <div id="stars-group-5"></div>
          <div id="stars-group-6"></div>
        </div>

        <div class="title">
          <div class="sub-text">
            <h1>Our Work</h1>
            <div class="sub-breadcrumb">
              <a href="index.html">Home</a>
              <a href="#">Our Work</a>
              <a href="#" id="resultTitle">Win With Strategy And Not Just Weapons</a>
            </div>
          </div>
          <div class="sub-search">
            <form action="">
              <input type="search" placeholder="SEARCH" />
              <button type="submit">
                <img src="assets/img/icon_search.svg" alt="" />
              </button>
            </form>
          </div>
        </div>
      </section>

      <section class="article-detail">
        <div class="article-header">
          <span id="resultDate">loading ..</span>
          <img id="resultImage" src="" alt="" />
          <div class="article-h-text">
            <!-- <span>Gameplay</span>
            <span>By KillMax Trone</span> -->
            <span style="color:#FF4200;" id="resultTitle2"
              >loading ..</span
            >
          </div>
        </div>
        <div class="article-body">
          <div class="container">
          <div id="resultImages" class="row"></div>
          <div class="article-textfield" id="resultDetail">
         
         
            </div>
          
          </div>
       
        </div>
      </section>

      <footer>
        <div class="footer-top">
          <div class="footer-logos">
            <img src="assets/img/edm_logo_com.svg" alt="" />
            <img src="assets/img/edm-logo-2.png" alt="" />
          </div>

          <form action="">
            <input type="search" placeholder="CATEGORIES" />
            <button type="submit">
              <img src="assets/img/icon_search.svg" alt="" />
            </button>
          </form>
        </div>
        <div class="footer-bot">
          <span
            >COPYRIGHT <span>&copy;</span> 2023 EDM COMPANY. ALL RIGHTS
            RESERVED.</span
          >
          <a href="">Terms of use I Privacy Policy</a>
        </div>
      </footer>
      <div class="modal fade" id="imagePreviewModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Image Preview</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <img src="" alt="Image Preview" class="img-fluid" id="modalImage">
            </div>
          </div>
        </div>
      </div>
    
    </div>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script src="assets/js/navbar.js"></script>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const view = urlParams.get("view");
      function formatDateToCustomFormat(isoDateString) {
        const date = new Date(isoDateString);
        const options = { month: "long", day: "numeric", year: "numeric" };
        return date.toLocaleDateString("en-US", options);
      }
      let modal; 
      let modalImage;
      modal = document.getElementById('imagePreviewModal');
      modalImage = document.querySelector('.modal-image');
      fetch("https://edm.desdev.me/api/portfolio-items/" + view)
        .then(function (response) {
          return response.json();
        })
        .then(function (data) {
          document.getElementById("resultDate").innerHTML = data.data[0].created_at;
           const spanDescription1 = document.getElementById("resultTitle");
           const spanDescription = document.getElementById("resultTitle2");

 
           if (currentLanguage == 'eng') {
              spanDescription1.innerHTML = data.data[0].title_en ||  data.data[0].title;
              spanDescription.innerHTML = data.data[0].title_en ||  data.data[0].title;
            } else {
              spanDescription1.innerHTML =  data.data[0].title;
              spanDescription.innerHTML =  data.data[0].title;
            }
            const imagesContainer = document.getElementById("resultImages");

            data.data[0].images.forEach(imageData => {
              const col = document.createElement("div");
              col.classList.add("col-md-2", "mb-2");

              const img = document.createElement("img");
              img.src = imageData.image;
              img.alt = "Image Alt Text"; 

              col.appendChild(img);
              imagesContainer.appendChild(col);
              img.addEventListener('click', function() {
                  openImagePreview(img.src);
              });
            });

          document.getElementById("resultImage").src = data.data[0].image;
          const Description = document.getElementById("resultDetail");
            if (currentLanguage == 'eng') {
              Description.innerHTML = data.data[0].detail_en ||  data.data[0].detail;
            } else {
              Description.innerHTML =  data.data[0].detail;
            }
      
        })
        .catch(function (e) {
          console.log(e);
        });

        function openImagePreview(imageSrc) {
            const modalImage = document.getElementById('modalImage');
            modalImage.src = imageSrc;

            const imagePreviewModal = new bootstrap.Modal(document.getElementById('imagePreviewModal'));
            imagePreviewModal.show();
        }
      function closeImagePreview() {
          modal.style.display = 'none';
      }

        $("img").removeAttr("style");
          $("img").addClass("img-fluid");
          $("img:first").removeClass("img-fluid");
          $("iframe").removeAttr("height");
          $("iframe").removeAttr("width");
          $("iframe").addClass("responsive-iframe");
          $("iframe:last").removeClass("responsive-iframe");
          $("iframe:last").addClass("responsive-iframe2");
    </script>
  </body>
</html>
