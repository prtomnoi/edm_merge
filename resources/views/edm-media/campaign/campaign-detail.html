<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EDM - News And Activity</title>

    <link rel="stylesheet" href="assets/fonts/fonts.css?v=3" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <link rel="stylesheet" href="assets/css/base-style.css?v=5" />
    <link rel="stylesheet" href="assets/css/navbar_style.css?v=3" />
    <link rel="stylesheet" href="assets/css/particle-anim.css?v=3" />
    <link rel="stylesheet" href="assets/css/subpage-base-style.css?v=3" />
    <link rel="stylesheet" href="assets/css/article-style.css?v=5" />
</head>

<body>
    <div class="side-menu">
        <svg class="close-btn" id="close-sidenav-btn" xmlns="http://www.w3.org/2000/svg" height="48" width="48">
        <path
          fill="#ffff"
          d="M12.45 38.7 9.3 35.55 20.85 24 9.3 12.5l3.15-3.2L24 20.8 35.55 9.3l3.15 3.2L27.2 24l11.5 11.55-3.15 3.15L24 27.2Z"
        />
      </svg>

        <div class="side-btn-section">
            <a href="index.html" class="side-btn"><img src="assets/img/edm-logo.png" alt="" /></a>
            <a href="index.html" class="side-btn">ABOUT US</a>
            <div class="side-collapse">
                <a href="#forCreator" class="side-btn" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="forCreator">FOR CREATOR</a
          >
          <div class="collapse" id="forCreator">
            <div class="card card-body">
              <a href="benefit.html">Solutions</a
              >
              <a href="influencer.html">Creator</a>
                <a href="vtuber-community.html">VTuber</a>
            </div>
        </div>
    </div>
    <div class="side-collapse">
        <a href="#forBrand" class="side-btn" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="forBrand">FOR BRAND</a
          >
          <div class="collapse" id="forBrand">
            <div class="card card-body">
              <a href="benefit.html">Solutions</a
              >
              <a href="influencer.html">Creator</a>
        <a href="vtuber-community.html">VTuber</a>
    </div>
    </div>
    </div>
    <a href="news-activity.html" class="side-btn">NEWS</a>
    <a href="contact-us.html" class="side-btn">CONTACT US</a>
    <div class="lang-change-btns">
        <a href="#" class="active" id="thaiBtn"><img src="assets/img/THAILAND.png" alt="" /> TH</a>
        <a href="#" id="engBtn"><img src="assets/img/UK.png" alt="" /> ENG</a>
    </div>
    </div>
    </div>

    <div class="main">
        <nav>
            <!-- Nav Hamberger menu -->
            <div class="nav-menu">
                <img src="assets/img/menu.svg" alt="" />
            </div>

            <div class="nav-btns">
                <a href="index.html"><img src="assets/img/edm-logo.png" alt="" /></a>
                <div class="nav-btns-wrapper">
                    <a href="index.html">ABOUT US</a>
                    <div class="nav-dropdown" data-dropdown>
                        <button class="nav-dropdown-btn" data-dropdown-button>
                FOR CREATOR
                <img src="assets/img/expand.svg" alt="" />
              </button>
                        <div class="nav-dropdown-menu">
                            <a href="">Solutions</a>
                            <a href="">Creator</a>
                        </div>
                    </div>
                    <div class="nav-dropdown" data-dropdown>
                        <button class="nav-dropdown-btn" data-dropdown-button>
                FOR BRAND
                <img src="assets/img/expand.svg" alt="" />
              </button>
                        <div class="nav-dropdown-menu">
                            <a href="branding.html">Service</a>
                            <a href="our-campaign.html">Campaign</a>
                        </div>
                    </div>
                    <a href="news-activity.html">NEWS</a>
                    <a href="contact-us.html">CONTACT US</a>
                    <div class="nav-dropdown" data-dropdown>
                        <button class="nav-dropdown-btn" data-dropdown-button>
                <img src="assets/img/thai-lang-icon.png" alt="" /> TH
                <img src="assets/img/expand.svg" alt="" />
              </button>
                        <div class="nav-dropdown-menu">
                            <a href="#"><img src="assets/img/thai-lang-icon.png" id="thaiBtn2" alt="" /> TH</a>
                            <a href="#"><img src="assets/img/UK.png" id="engBtn2" alt="" /> ENG</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <section class="header-sec">
            <div class="animation-wrapper">
                <div id="stars-group-1"></div>
                <div id="stars-group-2"></div>
                <div id="stars-group-3"></div>
                <div id="stars-group-4"></div>
                <div id="stars-group-5"></div>
                <div id="stars-group-6"></div>
            </div>
            <div class="gadget-menu">
                <a href=""><img src="assets/img/gadget-icons/fb-icon.svg" alt="" /></a>
                <a href=""><img src="assets/img/gadget-icons/yt-icon.svg" alt="" /></a>
                <a href=""><img src="assets/img/gadget-icons/gadget-edm-icon.svg" alt="" /></a>
                <a href=""><img src="assets/img/gadget-icons/joinus-icon.svg" alt="" /></a>
            </div>
            <div class="title">
                <div class="sub-text">
                    <h1>Our Campaign</h1>
                    <div class="sub-breadcrumb">
                        <a href="index.html">Home</a>
                        <a href="our-campaign.html">Our Campaign</a>
                        <a href="#" id="resultTitle"></a>
                    </div>
                </div>
                <div class="sub-search">
                    <form action="">
                        <input type="search" placeholder="SEARCH" />
                        <button type="submit">
                <img src="assets/img/icon_search.svg" alt="" />
              </button>
                    </form>
                </div>
            </div>
        </section>

        <section class="article-detail">
            <div class="article-header">
                <span id="resultDate">TUE DEC 02</span>
                <img id="resultImage" src="" alt="" />
                <div class="article-h-text campaign-article">
                    <span id="resultTitle2"></span>
                </div>
            </div>
            <div class="article-body">
                <iframe frameborder="0" height="300" id="Sg0TnTGCeWs" sandbox="" scrolling="no" src="https://www.youtube.com/embed/Sg0TnTGCeWs" tabindex="-1" width="100%"></iframe>
                <div class="article-textfield" id="resultDetail">

                </div>
                <div class="top-recents">
                    <h2 class="top-recents">Top Recent</h2>
                    <div class="activity-cards" id="top-recent-cards">
                    </div>
                </div>
            </div>
        </section>

        <footer>
            <div class="footer-top">
                <div class="footer-logos">
                    <img src="assets/img/edm_logo_com.svg" alt="" />
                    <img src="assets/img/edm-logo.png" alt="" />
                </div>

                <form action="">
                    <input type="search" placeholder="CATEGORIES" />
                    <button type="submit">
              <img src="assets/img/icon_search.svg" alt="" />
            </button>
                </form>
            </div>
            <div class="footer-bot">
                <span>COPYRIGHT <span>&copy;</span> 2023 EDM HOLDING ALL RIGHTS RESERVED.</span>
                <a href="#" class="text-white">Terms of use I Privacy Policy I Contact us</a>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="assets/js/navbar.js?v=6"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const view = urlParams.get("view");

        function formatDateToCustomFormat(isoDateString) {
            const date = new Date(isoDateString);
            const options = {
                month: "long",
                day: "numeric",
                year: "numeric"
            };
            return date.toLocaleDateString("en-US", options);
        }
        fetch("https://edmcompany.co.th/api/campaigns/" + view)
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                console.log(data.data);
                document.getElementById("resultTitle").innerHTML = data.data[0].title;
                document.getElementById("resultDate").innerHTML = data.data[0].created_at;
                document.getElementById("resultTitle2").innerHTML =
                    data.data[0].title;
                document.getElementById("resultImage").src = data.data[0].image;
                document.getElementById("resultDetail").innerHTML =
                    data.data[0].detail;
                $("img").removeAttr("style");
                $("img").addClass("img-fluid");
                $("img:first").removeClass("img-fluid");
                $("iframe").removeAttr("height");
                $("iframe").removeAttr("width");
                $("iframe").addClass("responsive-iframe");
                $("iframe:last").removeClass("responsive-iframe");
                $("iframe:last").addClass("responsive-iframe2");
            })
            .catch(function(e) {
                console.log(e);
            });

        document.addEventListener('DOMContentLoaded', () => {
            const newsApiUrl = 'https://edmcompany.co.th/api/campaigns-top';
            const maxActivities = 3; // Set the maximum number of recent activities to display

            async function fetchTopRecentActivities() {
                try {
                    const response = await fetch(newsApiUrl);
                    const activityData = await response.json();
                    const topRecentCards = document.getElementById('top-recent-cards');

                    for (let i = 0; i < Math.min(activityData.data.length, maxActivities); i++) {
                        const activityItem = activityData.data[i];

                        const actCard = document.createElement('div');
                        actCard.classList.add('act-card');

                        const spanDate = document.createElement('span');
                        spanDate.textContent = activityItem.created_at;

                        const img = document.createElement('img');
                        img.src = activityItem.image;
                        img.alt = '';

                        const divContent = document.createElement('div');

                        const spanTitle = document.createElement('span');
                        spanTitle.textContent = activityItem.title;

                        const spanAuthor = document.createElement('span');
                        spanAuthor.textContent = `By ${activityItem.signature}`;

                        const spanDescription = document.createElement('span');
                        spanDescription.textContent = activityItem.title;

                        const aReadMore = document.createElement('a');
                        aReadMore.href = 'campaign-detail.html?view=' + activityItem.id;
                        aReadMore.textContent = 'READ MORE';

                        divContent.appendChild(spanTitle);
                        divContent.appendChild(spanAuthor);
                        divContent.appendChild(spanDescription);
                        divContent.appendChild(aReadMore);

                        actCard.appendChild(spanDate);
                        actCard.appendChild(img);
                        actCard.appendChild(divContent);

                        topRecentCards.appendChild(actCard);
                    }
                } catch (error) {
                    console.error('Error fetching top recent activities:', error);
                }
            }

            fetchTopRecentActivities();
        });
    </script>
</body>

</html>